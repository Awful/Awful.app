#!/usr/bin/env python3

from datetime import datetime
from pathlib import Path

PRIMARY_APP_ICONSET = "rated_five_appicon"

script_dir = Path(__file__).parent

asset_catalog_path = script_dir.joinpath('..', 'App', 'App Icons.xcassets').resolve()
appiconsets = list(p.stem for p in asset_catalog_path.iterdir() if p.suffix == '.appiconset')
assert PRIMARY_APP_ICONSET in appiconsets
alternate_appiconsets = sorted(a for a in appiconsets if a != PRIMARY_APP_ICONSET)

xcconfig_path = script_dir.joinpath('..', 'App', 'Config', 'App Icons.xcconfig').resolve()
with open(xcconfig_path, 'w') as xcconfig:
    xcconfig.write(f"""//  {xcconfig_path.name}
//
//  Copyright {datetime.now().year} Awful Contributors. CC BY-NC-SA 3.0 US https://github.com/Awful/Awful.app

// This file is generated by `Scripts/app-icons`. Change that, don't change this!

ASSETCATALOG_COMPILER_APPICON_NAME = {PRIMARY_APP_ICONSET}
ASSETCATALOG_COMPILER_ALTERNATE_APPICON_NAMES = {' '.join(alternate_appiconsets)}
""")
